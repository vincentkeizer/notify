(function(n){function r(){this._items=[]}var i={show:function(){var i=n(this),t=i.data("notify"),r,u;t&&(r=n.notify.queue[t.container.attr("data-notify-id")],u=r.add(t.notifier),t.notifier.css({top:r.getYPosition(t.notifier),left:"50%","margin-left":t.notifier.outerWidth()/-2}).bind("update",function(){i.trigger("show")}),u||(t.notifier.animate({opacity:1},t.settings.animationDuration),t.settings.displayTime&&!t.settings.sticky&&setTimeout(function(){i.trigger("hide")},t.settings.displayTime)))},hide:function(){var i=n(this),t=i.data("notify");t&&t.notifier.css("opacity")&&t.notifier.animate({opacity:0},t.settings.animationDuration,function(){n.notify.queue[t.container.attr("data-notify-id")].remove(t.notifier)})}},t={init:function(t){var u=n.extend({animationDuration:500,displayTime:3e3,appendTo:"body",autoShow:!0,closeText:"X",sticky:!1},t);return n(this).each(function(){var t=n(this),s=t.data("notify"),e,f,o;s||(e=n("<div />",{"class":"notify","data-notifier-id":(new Date).getTime(),css:{opacity:0,position:"absolute"}}).append(n("<span />",{"class":"close",text:u.closeText,click:function(){t.trigger("hide")}})),t.bind("show",i.show).bind("hide",i.hide),e.append(t),f=n(u.appendTo),f.attr("data-notify-id")||(o=(new Date).getTime(),n.notify.queue[o]=new r,f.attr("data-notify-id",o)),f.append(e),t.data("notify",{settings:u,notifier:e,container:f}),u.autoShow&&t.trigger("show"))})},destroy:function(){return this.each(function(){var i=n(this),t=i.data("notify");t&&t.notifier.remove()})},show:function(){return this.each(function(){var t=n(this).data("notify");t&&n(this).trigger("show")})},hide:function(){return this.each(function(){var t=n(this).data("notify");t&&n(this).trigger("hide")})}};n.fn.notify=function(i){var r=i;if(t[r])return t[r].apply(this,Array.prototype.slice.call(arguments,1));if(typeof r!="object"&&r)n.error("Method "+r+" does not exist on jQuery notify");else return t.init.apply(this,arguments)},n.extend(r.prototype,{add:function(t){var i=n.inArray(t,this._items)>-1;return i||this._items.push(t),i},remove:function(t){var u=n.inArray(t,this._items),i,r;for(this._items.splice(u,1),i=u;i<this._items.length;i++)r=this._items[i],r&&r.length&&r.trigger("update")},getYPosition:function(n){for(var r=0,i,t=0;t<this._items.length;t++){if(i=this._items[t],i==n)break;r+=i.outerHeight(!0)}return r}}),n.notify={queue:{}}})(jQuery);